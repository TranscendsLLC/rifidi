<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_144) on Wed Jan 09 12:40:54 UTC 2019 -->
<title>DataSourceTransactionManager (spring-jdbc 5.1.4.RELEASE API)</title>
<meta name="date" content="2019-01-09">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DataSourceTransactionManager (spring-jdbc 5.1.4.RELEASE API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataSourceTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">spring-jdbc</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/springframework/jdbc/datasource/ConnectionProxy.html" title="interface in org.springframework.jdbc.datasource"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html" title="class in org.springframework.jdbc.datasource"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/springframework/jdbc/datasource/DataSourceTransactionManager.html" target="_top">Frames</a></li>
<li><a href="DataSourceTransactionManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.org.springframework.transaction.support.AbstractPlatformTransactionManager">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.springframework.transaction.support.AbstractPlatformTransactionManager">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.springframework.jdbc.datasource</div>
<h2 title="Class DataSourceTransactionManager" class="title">Class DataSourceTransactionManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.springframework.transaction.support.AbstractPlatformTransactionManager</li>
<li>
<ul class="inheritance">
<li>org.springframework.jdbc.datasource.DataSourceTransactionManager</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.io.Serializable, org.springframework.beans.factory.InitializingBean, org.springframework.transaction.PlatformTransactionManager, org.springframework.transaction.support.ResourceTransactionManager</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">DataSourceTransactionManager</span>
extends org.springframework.transaction.support.AbstractPlatformTransactionManager
implements org.springframework.transaction.support.ResourceTransactionManager, org.springframework.beans.factory.InitializingBean</pre>
<div class="block"><code>PlatformTransactionManager</code>
 implementation for a single JDBC <code>DataSource</code>. This class is
 capable of working in any environment with any JDBC driver, as long as the setup
 uses a <code>javax.sql.DataSource</code> as its <code>Connection</code> factory mechanism.
 Binds a JDBC Connection from the specified DataSource to the current thread,
 potentially allowing for one thread-bound Connection per DataSource.

 <p><b>Note: The DataSource that this transaction manager operates on needs
 to return independent Connections.</b> The Connections may come from a pool
 (the typical case), but the DataSource must not return thread-scoped /
 request-scoped Connections or the like. This transaction manager will
 associate Connections with thread-bound transactions itself, according
 to the specified propagation behavior. It assumes that a separate,
 independent Connection can be obtained even during an ongoing transaction.

 <p>Application code is required to retrieve the JDBC Connection via
 <a href="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getConnection-javax.sql.DataSource-"><code>DataSourceUtils.getConnection(DataSource)</code></a> instead of a standard
 Java EE-style <code>DataSource.getConnection()</code> call. Spring classes such as
 <a href="../../../../org/springframework/jdbc/core/JdbcTemplate.html" title="class in org.springframework.jdbc.core"><code>JdbcTemplate</code></a> use this strategy implicitly.
 If not used in combination with this transaction manager, the
 <a href="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html" title="class in org.springframework.jdbc.datasource"><code>DataSourceUtils</code></a> lookup strategy behaves exactly like the native
 DataSource lookup; it can thus be used in a portable fashion.

 <p>Alternatively, you can allow application code to work with the standard
 Java EE-style lookup pattern <code>DataSource.getConnection()</code>, for example for
 legacy code that is not aware of Spring at all. In that case, define a
 <a href="../../../../org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>TransactionAwareDataSourceProxy</code></a> for your target DataSource, and pass
 that proxy DataSource to your DAOs, which will automatically participate in
 Spring-managed transactions when accessing it.

 <p>Supports custom isolation levels, and timeouts which get applied as
 appropriate JDBC statement timeouts. To support the latter, application code
 must either use <a href="../../../../org/springframework/jdbc/core/JdbcTemplate.html" title="class in org.springframework.jdbc.core"><code>JdbcTemplate</code></a>, call
 <a href="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#applyTransactionTimeout-java.sql.Statement-javax.sql.DataSource-"><code>DataSourceUtils.applyTransactionTimeout(java.sql.Statement, javax.sql.DataSource)</code></a> for each created JDBC Statement,
 or go through a <a href="../../../../org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>TransactionAwareDataSourceProxy</code></a> which will create
 timeout-aware JDBC Connections and Statements automatically.

 <p>Consider defining a <a href="../../../../org/springframework/jdbc/datasource/LazyConnectionDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>LazyConnectionDataSourceProxy</code></a> for your target
 DataSource, pointing both this transaction manager and your DAOs to it.
 This will lead to optimized handling of "empty" transactions, i.e. of transactions
 without any JDBC statements executed. A LazyConnectionDataSourceProxy will not fetch
 an actual JDBC Connection from the target DataSource until a Statement gets executed,
 lazily applying the specified transaction settings to the target Connection.

 <p>This transaction manager supports nested transactions via the JDBC 3.0
 <code>Savepoint</code> mechanism. The
 <code>"nestedTransactionAllowed"</code> flag defaults
 to "true", since nested transactions will work without restrictions on JDBC
 drivers that support savepoints (such as the Oracle JDBC driver).

 <p>This transaction manager can be used as a replacement for the
 <code>org.springframework.transaction.jta.JtaTransactionManager</code> in the single
 resource case, as it does not require a container that supports JTA, typically
 in combination with a locally defined JDBC DataSource (e.g. an Apache Commons
 DBCP connection pool). Switching between this local strategy and a JTA
 environment is just a matter of configuration!

 <p>As of 4.3.4, this transaction manager triggers flush callbacks on registered
 transaction synchronizations (if synchronization is generally active), assuming
 resources operating on the underlying JDBC <code>Connection</code>. This allows for
 setup analogous to <code>JtaTransactionManager</code>, in particular with respect to
 lazily registered ORM resources (e.g. a Hibernate <code>Session</code>).</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>02.05.2003</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Juergen Hoeller</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>AbstractPlatformTransactionManager.setNestedTransactionAllowed(boolean)</code>, 
<code>Savepoint</code>, 
<a href="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#getConnection-javax.sql.DataSource-"><code>DataSourceUtils.getConnection(javax.sql.DataSource)</code></a>, 
<a href="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#applyTransactionTimeout-java.sql.Statement-javax.sql.DataSource-"><code>DataSourceUtils.applyTransactionTimeout(java.sql.Statement, javax.sql.DataSource)</code></a>, 
<a href="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html#releaseConnection-java.sql.Connection-javax.sql.DataSource-"><code>DataSourceUtils.releaseConnection(java.sql.Connection, javax.sql.DataSource)</code></a>, 
<a href="../../../../org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>TransactionAwareDataSourceProxy</code></a>, 
<a href="../../../../org/springframework/jdbc/datasource/LazyConnectionDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>LazyConnectionDataSourceProxy</code></a>, 
<a href="../../../../org/springframework/jdbc/core/JdbcTemplate.html" title="class in org.springframework.jdbc.core"><code>JdbcTemplate</code></a>, 
<a href="../../../../serialized-form.html#org.springframework.jdbc.datasource.DataSourceTransactionManager">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.org.springframework.transaction.support.AbstractPlatformTransactionManager">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.springframework.transaction.support.AbstractPlatformTransactionManager</h3>
<code>org.springframework.transaction.support.AbstractPlatformTransactionManager.SuspendedResourcesHolder</code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.springframework.transaction.support.AbstractPlatformTransactionManager">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.springframework.transaction.support.AbstractPlatformTransactionManager</h3>
<code>logger, SYNCHRONIZATION_ALWAYS, SYNCHRONIZATION_NEVER, SYNCHRONIZATION_ON_ACTUAL_TRANSACTION</code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#DataSourceTransactionManager--">DataSourceTransactionManager</a></span>()</code>
<div class="block">Create a new DataSourceTransactionManager instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#DataSourceTransactionManager-javax.sql.DataSource-">DataSourceTransactionManager</a></span>(javax.sql.DataSource&nbsp;dataSource)</code>
<div class="block">Create a new DataSourceTransactionManager instance.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#afterPropertiesSet--">afterPropertiesSet</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#doBegin-java.lang.Object-org.springframework.transaction.TransactionDefinition-">doBegin</a></span>(java.lang.Object&nbsp;transaction,
       org.springframework.transaction.TransactionDefinition&nbsp;definition)</code>
<div class="block">This implementation sets the isolation level but ignores the timeout.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#doCleanupAfterCompletion-java.lang.Object-">doCleanupAfterCompletion</a></span>(java.lang.Object&nbsp;transaction)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#doCommit-org.springframework.transaction.support.DefaultTransactionStatus-">doCommit</a></span>(org.springframework.transaction.support.DefaultTransactionStatus&nbsp;status)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>protected java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#doGetTransaction--">doGetTransaction</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#doResume-java.lang.Object-java.lang.Object-">doResume</a></span>(java.lang.Object&nbsp;transaction,
        java.lang.Object&nbsp;suspendedResources)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#doRollback-org.springframework.transaction.support.DefaultTransactionStatus-">doRollback</a></span>(org.springframework.transaction.support.DefaultTransactionStatus&nbsp;status)</code>&nbsp;</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#doSetRollbackOnly-org.springframework.transaction.support.DefaultTransactionStatus-">doSetRollbackOnly</a></span>(org.springframework.transaction.support.DefaultTransactionStatus&nbsp;status)</code>&nbsp;</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>protected java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#doSuspend-java.lang.Object-">doSuspend</a></span>(java.lang.Object&nbsp;transaction)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>javax.sql.DataSource</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#getDataSource--">getDataSource</a></span>()</code>
<div class="block">Return the JDBC DataSource that this instance manages transactions for.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#getResourceFactory--">getResourceFactory</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#isEnforceReadOnly--">isEnforceReadOnly</a></span>()</code>
<div class="block">Return whether to enforce the read-only nature of a transaction
 through an explicit statement on the transactional connection.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#isExistingTransaction-java.lang.Object-">isExistingTransaction</a></span>(java.lang.Object&nbsp;transaction)</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>protected javax.sql.DataSource</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#obtainDataSource--">obtainDataSource</a></span>()</code>
<div class="block">Obtain the DataSource for actual use.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#prepareTransactionalConnection-java.sql.Connection-org.springframework.transaction.TransactionDefinition-">prepareTransactionalConnection</a></span>(java.sql.Connection&nbsp;con,
                              org.springframework.transaction.TransactionDefinition&nbsp;definition)</code>
<div class="block">Prepare the transactional <code>Connection</code> right after transaction begin.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#setDataSource-javax.sql.DataSource-">setDataSource</a></span>(javax.sql.DataSource&nbsp;dataSource)</code>
<div class="block">Set the JDBC DataSource that this instance should manage transactions for.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#setEnforceReadOnly-boolean-">setEnforceReadOnly</a></span>(boolean&nbsp;enforceReadOnly)</code>
<div class="block">Specify whether to enforce the read-only nature of a transaction
 (as indicated by <code>TransactionDefinition.isReadOnly()</code>
 through an explicit statement on the transactional connection:
 "SET TRANSACTION READ ONLY" as understood by Oracle, MySQL and Postgres.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.springframework.transaction.support.AbstractPlatformTransactionManager">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.springframework.transaction.support.AbstractPlatformTransactionManager</h3>
<code>commit, determineTimeout, getDefaultTimeout, getTransaction, getTransactionSynchronization, invokeAfterCompletion, isFailEarlyOnGlobalRollbackOnly, isGlobalRollbackOnParticipationFailure, isNestedTransactionAllowed, isRollbackOnCommitFailure, isValidateExistingTransaction, newTransactionStatus, prepareForCommit, prepareSynchronization, prepareTransactionStatus, registerAfterCompletionWithExistingTransaction, resume, rollback, setDefaultTimeout, setFailEarlyOnGlobalRollbackOnly, setGlobalRollbackOnParticipationFailure, setNestedTransactionAllowed, setRollbackOnCommitFailure, setTransactionSynchronization, setTransactionSynchronizationName, setValidateExistingTransaction, shouldCommitOnGlobalRollbackOnly, suspend, triggerBeforeCommit, triggerBeforeCompletion, useSavepointForNestedTransaction</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.springframework.transaction.PlatformTransactionManager">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;org.springframework.transaction.PlatformTransactionManager</h3>
<code>commit, getTransaction, rollback</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DataSourceTransactionManager--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DataSourceTransactionManager</h4>
<pre>public&nbsp;DataSourceTransactionManager()</pre>
<div class="block">Create a new DataSourceTransactionManager instance.
 A DataSource has to be set to be able to use it.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#setDataSource-javax.sql.DataSource-"><code>setDataSource(javax.sql.DataSource)</code></a></dd>
</dl>
</li>
</ul>
<a name="DataSourceTransactionManager-javax.sql.DataSource-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DataSourceTransactionManager</h4>
<pre>public&nbsp;DataSourceTransactionManager(javax.sql.DataSource&nbsp;dataSource)</pre>
<div class="block">Create a new DataSourceTransactionManager instance.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dataSource</code> - the JDBC DataSource to manage transactions for</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setDataSource-javax.sql.DataSource-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDataSource</h4>
<pre>public&nbsp;void&nbsp;setDataSource(@Nullable
                          javax.sql.DataSource&nbsp;dataSource)</pre>
<div class="block">Set the JDBC DataSource that this instance should manage transactions for.
 <p>This will typically be a locally defined DataSource, for example an
 Apache Commons DBCP connection pool. Alternatively, you can also drive
 transactions for a non-XA J2EE DataSource fetched from JNDI. For an XA
 DataSource, use JtaTransactionManager.
 <p>The DataSource specified here should be the target DataSource to manage
 transactions for, not a TransactionAwareDataSourceProxy. Only data access
 code may work with TransactionAwareDataSourceProxy, while the transaction
 manager needs to work on the underlying target DataSource. If there's
 nevertheless a TransactionAwareDataSourceProxy passed in, it will be
 unwrapped to extract its target DataSource.
 <p><b>The DataSource passed in here needs to return independent Connections.</b>
 The Connections may come from a pool (the typical case), but the DataSource
 must not return thread-scoped / request-scoped Connections or the like.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/springframework/jdbc/datasource/TransactionAwareDataSourceProxy.html" title="class in org.springframework.jdbc.datasource"><code>TransactionAwareDataSourceProxy</code></a>, 
<code>org.springframework.transaction.jta.JtaTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="getDataSource--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataSource</h4>
<pre>@Nullable
public&nbsp;javax.sql.DataSource&nbsp;getDataSource()</pre>
<div class="block">Return the JDBC DataSource that this instance manages transactions for.</div>
</li>
</ul>
<a name="obtainDataSource--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>obtainDataSource</h4>
<pre>protected&nbsp;javax.sql.DataSource&nbsp;obtainDataSource()</pre>
<div class="block">Obtain the DataSource for actual use.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the DataSource (never <code>null</code>)</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - in case of no DataSource set</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>5.0</dd>
</dl>
</li>
</ul>
<a name="setEnforceReadOnly-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEnforceReadOnly</h4>
<pre>public&nbsp;void&nbsp;setEnforceReadOnly(boolean&nbsp;enforceReadOnly)</pre>
<div class="block">Specify whether to enforce the read-only nature of a transaction
 (as indicated by <code>TransactionDefinition.isReadOnly()</code>
 through an explicit statement on the transactional connection:
 "SET TRANSACTION READ ONLY" as understood by Oracle, MySQL and Postgres.
 <p>The exact treatment, including any SQL statement executed on the connection,
 can be customized through through <a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#prepareTransactionalConnection-java.sql.Connection-org.springframework.transaction.TransactionDefinition-"><code>prepareTransactionalConnection(java.sql.Connection, org.springframework.transaction.TransactionDefinition)</code></a>.
 <p>This mode of read-only handling goes beyond the <code>Connection.setReadOnly(boolean)</code>
 hint that Spring applies by default. In contrast to that standard JDBC hint,
 "SET TRANSACTION READ ONLY" enforces an isolation-level-like connection mode
 where data manipulation statements are strictly disallowed. Also, on Oracle,
 this read-only mode provides read consistency for the entire transaction.
 <p>Note that older Oracle JDBC drivers (9i, 10g) used to enforce this read-only
 mode even for <code>Connection.setReadOnly(true</code>. However, with recent drivers,
 this strong enforcement needs to be applied explicitly, e.g. through this flag.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.3.7</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#prepareTransactionalConnection-java.sql.Connection-org.springframework.transaction.TransactionDefinition-"><code>prepareTransactionalConnection(java.sql.Connection, org.springframework.transaction.TransactionDefinition)</code></a></dd>
</dl>
</li>
</ul>
<a name="isEnforceReadOnly--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEnforceReadOnly</h4>
<pre>public&nbsp;boolean&nbsp;isEnforceReadOnly()</pre>
<div class="block">Return whether to enforce the read-only nature of a transaction
 through an explicit statement on the transactional connection.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.3.7</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#setEnforceReadOnly-boolean-"><code>setEnforceReadOnly(boolean)</code></a></dd>
</dl>
</li>
</ul>
<a name="afterPropertiesSet--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>afterPropertiesSet</h4>
<pre>public&nbsp;void&nbsp;afterPropertiesSet()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>afterPropertiesSet</code>&nbsp;in interface&nbsp;<code>org.springframework.beans.factory.InitializingBean</code></dd>
</dl>
</li>
</ul>
<a name="getResourceFactory--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResourceFactory</h4>
<pre>public&nbsp;java.lang.Object&nbsp;getResourceFactory()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>getResourceFactory</code>&nbsp;in interface&nbsp;<code>org.springframework.transaction.support.ResourceTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="doGetTransaction--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doGetTransaction</h4>
<pre>protected&nbsp;java.lang.Object&nbsp;doGetTransaction()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>doGetTransaction</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="isExistingTransaction-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isExistingTransaction</h4>
<pre>protected&nbsp;boolean&nbsp;isExistingTransaction(java.lang.Object&nbsp;transaction)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>isExistingTransaction</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="doBegin-java.lang.Object-org.springframework.transaction.TransactionDefinition-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doBegin</h4>
<pre>protected&nbsp;void&nbsp;doBegin(java.lang.Object&nbsp;transaction,
                       org.springframework.transaction.TransactionDefinition&nbsp;definition)</pre>
<div class="block">This implementation sets the isolation level but ignores the timeout.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>doBegin</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="doSuspend-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doSuspend</h4>
<pre>protected&nbsp;java.lang.Object&nbsp;doSuspend(java.lang.Object&nbsp;transaction)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>doSuspend</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="doResume-java.lang.Object-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doResume</h4>
<pre>protected&nbsp;void&nbsp;doResume(@Nullable
                        java.lang.Object&nbsp;transaction,
                        java.lang.Object&nbsp;suspendedResources)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>doResume</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="doCommit-org.springframework.transaction.support.DefaultTransactionStatus-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCommit</h4>
<pre>protected&nbsp;void&nbsp;doCommit(org.springframework.transaction.support.DefaultTransactionStatus&nbsp;status)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>doCommit</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="doRollback-org.springframework.transaction.support.DefaultTransactionStatus-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRollback</h4>
<pre>protected&nbsp;void&nbsp;doRollback(org.springframework.transaction.support.DefaultTransactionStatus&nbsp;status)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>doRollback</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="doSetRollbackOnly-org.springframework.transaction.support.DefaultTransactionStatus-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doSetRollbackOnly</h4>
<pre>protected&nbsp;void&nbsp;doSetRollbackOnly(org.springframework.transaction.support.DefaultTransactionStatus&nbsp;status)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>doSetRollbackOnly</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="doCleanupAfterCompletion-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doCleanupAfterCompletion</h4>
<pre>protected&nbsp;void&nbsp;doCleanupAfterCompletion(java.lang.Object&nbsp;transaction)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code>doCleanupAfterCompletion</code>&nbsp;in class&nbsp;<code>org.springframework.transaction.support.AbstractPlatformTransactionManager</code></dd>
</dl>
</li>
</ul>
<a name="prepareTransactionalConnection-java.sql.Connection-org.springframework.transaction.TransactionDefinition-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>prepareTransactionalConnection</h4>
<pre>protected&nbsp;void&nbsp;prepareTransactionalConnection(java.sql.Connection&nbsp;con,
                                              org.springframework.transaction.TransactionDefinition&nbsp;definition)
                                       throws java.sql.SQLException</pre>
<div class="block">Prepare the transactional <code>Connection</code> right after transaction begin.
 <p>The default implementation executes a "SET TRANSACTION READ ONLY" statement
 if the <a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#setEnforceReadOnly-boolean-"><code>"enforceReadOnly"</code></a> flag is set to <code>true</code>
 and the transaction definition indicates a read-only transaction.
 <p>The "SET TRANSACTION READ ONLY" is understood by Oracle, MySQL and Postgres
 and may work with other databases as well. If you'd like to adapt this treatment,
 override this method accordingly.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>con</code> - the transactional JDBC Connection</dd>
<dd><code>definition</code> - the current transaction definition</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if thrown by JDBC API</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.3.7</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/springframework/jdbc/datasource/DataSourceTransactionManager.html#setEnforceReadOnly-boolean-"><code>setEnforceReadOnly(boolean)</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DataSourceTransactionManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage">spring-jdbc</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/springframework/jdbc/datasource/ConnectionProxy.html" title="interface in org.springframework.jdbc.datasource"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/springframework/jdbc/datasource/DataSourceUtils.html" title="class in org.springframework.jdbc.datasource"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/springframework/jdbc/datasource/DataSourceTransactionManager.html" target="_top">Frames</a></li>
<li><a href="DataSourceTransactionManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.classes.inherited.from.class.org.springframework.transaction.support.AbstractPlatformTransactionManager">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.springframework.transaction.support.AbstractPlatformTransactionManager">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
